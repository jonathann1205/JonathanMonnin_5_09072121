let params=new URL(document.location).searchParams,id=params.get("id");const urlId=`http://localhost:3000/api/cameras/${id}`,pageProduits=function(){fetch(urlId).then((function(response){response.json().then((function(data){let affichageProduit=`\n            <div class="col-12 col-md-6">\n                <img src="${data.imageUrl}" class="d-block w-100" alt="..."></div>\n            </div>\n            <div class="col-12 col-md-6">\n                <div>\n                    <h1>${data.name}</h1>\n                </div>\n                <div>\n                    <p> Prix ${data.price} </p>\n                </div>\n                <div>\n                    <label for="form-select" class="form-label">Lentille</label>\n                    <select class="form-select optionlentille" aria-label="lentilles" >\n                        \n                    </select>\n                </div>\n                <div>\n                    <label for="form-select" class="form-label mt-2">Quantité</label>\n                    <select class="form-select " aria-label="Quantité" id="quantité" >\n                        <option value="1">1</option>\n                        <option value="2">2</option>\n                        <option value="3">3</option>\n                        <option value="4">4</option>\n                        <option value="5">5</option>\n                        <option value="6">6</option>\n                        <option value="7">7</option>\n                        <option value="8">8</option>\n                        <option value="9">9</option>\n                        <option value="10">10</option>\n                    </select>\n                </div>\n                <div>   \n                 <button type="submit" class="btn btn-primary mt-4" id="btnPanier">Ajouter au panier</button>\n                </div>\n                <div class=" deroulant bg-success rounded  ">\n                <p class="ajoutPanier text-center text-white mt-5  ">Le produit a été ajouté au panier. </p>\n                </div>\n            </div>\n            <div class="row col-12 mt-5 justify-content-center border-bottom border-top ">\n                <div class=" col-12  mt-4    ">\n                        <h2> Description </p>\n                        <p> ${data.description} </p>\n                </div>\n            </div>\n            `;document.querySelector(".fiche-produit").innerHTML=affichageProduit;let affichageList="";for(let list of data.lenses)affichageList+=`   \n                        <option value="${list}">${list}</option>\n               `;document.querySelector(".optionlentille").innerHTML=affichageList;const ajout=document.getElementById("btnPanier");ajout.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),deroulant();let quantiteProduit=document.getElementById("quantité");quantiteChoisi=quantiteProduit.value;let prixMulti=0;prixMulti=quantiteChoisi>1?quantiteChoisi*data.price:data.price;let lentille=document.querySelector(".optionlentille");lentilleChoisi=lentille.value;let ficheProduit={idProduit:data._id,nomProduit:data.name,lentilleChoisi:lentilleChoisi,quantite:quantiteChoisi,prix:prixMulti},produitStorage=JSON.parse(localStorage.getItem("produit"));produitStorage?(produitStorage.push(ficheProduit),localStorage.setItem("produit",JSON.stringify(produitStorage))):(produitStorage=[],produitStorage.push(ficheProduit),localStorage.setItem("produit",JSON.stringify(produitStorage)))})})).catch((function(err){console.log("erreur: "+err)}))}))};function deroulant(){let deroulant;document.querySelector(".deroulant").style.display="block"}pageProduits();